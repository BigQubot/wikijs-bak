= FAQ

TIP: More Infomation: link:/en/BPI-R4/BananaPi_BPI-R4[Banana Pi BPI-R4]

*Table of contents*

. link:/en/BPI-R4/BananaPi_BPI-R4_FAQ#_r4_debugging_methods[R4 Debugging Methods]
. link:/en/BPI-R4/BananaPi_BPI-R4_FAQ#_no_serial_port_output[No serial port output]
. link:/en/BPI-R4/BananaPi_BPI-R4_FAQ#_system_unable_to_boot[System Unable to Boot]
. link:/en/BPI-R4/BananaPi_BPI-R4_FAQ#_improve_the_performance_of_radio_frequency_under_openwrt24_10_firmware[Improve the performance of radio frequency under OpenWrt24.10 firmware]


== R4 Debugging Methods

Debugging methods include TTL serial line debugging and SSH debugging.

=== TTL serial line debugging
Connection method:
[ptions="header"]
|===
2+|R4 board — TTL to USB cable
|GND |GND
|RX |TX
|TX |RX
|===

The board's serial port location is shown in the figure below:


Common debugging cables on the market: TTL to USB cables (line sequence definition is shown in the figure below)

image::/picture/ttl.jpg[ttl.jpg]

Open link:https://mobaxterm.mobatek.net/download.html[MobaXterm], then click on Session in the upper left corner and select Serial.

image::/picture/log_export-1.jpg[log_export-1.jpg]
image::/picture/log_export-2.jpg[log_export-2.jpg]
Select the port at the Serial port, select the baud rate at Speed (115200bps), and then click OK.

image::/picture/log_export-3.jpg[log_export-3.jpg]

=== SSH debugging

Connect the PC's internet cable to a LAN port (one of the LAN ports circled in the image below).



Or connect to a WiFi on the R4 router.(Please see link:/en/BPI-R4/BananaPi_BPI-R4_FAQ[here] for WiFi usage)


After obtaining the IP, use the ssh tool on the PC to enter the corresponding IP for connection debugging.

Open link:https://mobaxterm.mobatek.net/download.html[MobaXterm], then click on Session in the upper left corner and select SSH.

image::/picture/log_export-1.jpg[log_export-1.jpg]

In Remote host, fill in the IP address of the device you want to connect to, check Specify username and fill in the login username, and fill in the port number.

(The default IP address is 192.168.1.1. You can also verify this by checking the IP address you obtained. If the IP address you obtained is 192.168.11.213, then the IP address of R4 is 192.168.11.1.)

(The default login username is root and the default port is 22.)



== No serial port output

If there is no output from the serial port, first debug the system using SSH as described in link:/en/BPI-R4/BananaPi_BPI-R4_FAQ#_ssh_debugging[R4 Debugging Methods - SSH] to see if the system boots normally. (If you can't obtain an IP address or SSH connection fails, see link:/en/BPI-R4/BananaPi_BPI-R4_FAQ#_the_system_cannot_start_or_fails_to_start[The system cannot start or fails to start].)

. Check that the computer has a working serial cable.
+
Check that the PC has the corresponding serial port driver.

. Alternatively, replace the serial cable to determine if the hardware is faulty.

. Check whether the TTL line is connected correctly and whether the baud rate is selected correctly.

. Re-plug the TTL cable to check if it is caused by improper connection.

. If you have checked the above steps and confirmed that the problem lies with the motherboard hardware, please contact us and provide the following information: 
- Describe how you caused this phenomenon.
- Photo of the board powered on (the TTL line and DIP switch should be clearly visible), and photos of the MobaXterm software. You can also take a video.

== The system cannot start or fails to start
=== Check the DIP switch
Before booting, check and use the correct DIP switch.(BPI-R4 will burn img in NAND when it leaves the factory.)

. All Jumper is "1", BPI-R4 will boot from SD card 
+
image::/picture/r4_sdboot.jpg[r4_sdboot.jpg]

. SW3-A is "0" and SW3-B is "1" , BPI-R4 will boot from SPI NAND
+
image::/picture/r4_nandboot.jpg[r4_nandboot.jpg]

. SW3-A is "1" and SW3-B is "0" , BPI-R4 will boot from eMMC
+
image::/picture/r4_emmcboot.jpg[r4_emmcboot.jpg]

=== SD card

If you have verified that the DIP switches are correctly positioned, proceed to the following steps.

. After powering on the board, check if the PWR light in the upper right corner of the board is on. (If not, proceed to step 5.)

. Reseat and remove the SD card to check for poor contact.

. If the boot failure is due to a malfunction, format the SD card and re-burn the image file. (Use link:/en/BPI-R4/BananaPi_BPI-R4#_openwrt_mtk_mp4_1_wifi_sdk_wifi_driver_for_be14000_wifi_card[MP4.1] for the image file.For burning instructions, see link:/en/BPI-R4/GettingStarted_BPI-R4#_how_to_burn_image_to_sd_card[Getting Started].)
. Replace the SD card and re-burn the image file to verify again.

. Once the issue is confirmed, please contact us and provide the following information:

- Describe the issue you are experiencing and how it occurred.

- Photo of the board powered on (the TTL lines and DIP switches must be clearly visible).

- Provide the serial port log file.

=== NAND

If you have verified that the DIP switches are correctly positioned, proceed to the following steps.

. After powering on the board, check if the PWR light in the upper right corner of the board is on.

. If the boot failed, boot from an SD card and re-burn the image to the NAND drive. (Use link:/en/BPI-R4/BananaPi_BPI-R4#_openwrt_mtk_mp4_1_wifi_sdk_wifi_driver_for_be14000_wifi_card[MP4.1] for the image file.For burning instructions, see link:/en/BPI-R4/GettingStarted_BPI-R4#_how_to_burn_image_to_onboard_nand[Getting Started].)

. After confirming the issue, please contact us and provide the following information:

- Describe the issue you're experiencing and how it occurred.

- Photo of the board powered on (the TTL lines and DIP switches must be clearly visible).

- Provide the serial port log file.

==== SD card with Ubuntu or Debian 6.1 kernel
After booting from an SD image with the Ubuntu or Debian 6.1 kernel, the image in NAND will no longer boot. If you wish to boot from NAND, you will need to re-burn the image to NAND.

For the burning method, please see link:/en/BPI-R4/GettingStarted_BPI-R4#_how_to_burn_image_to_onboard_nand[Getting Started BPI-R4].

=== eMMC
If you have verified that the DIP switches are correctly positioned, proceed to the following steps.

. After powering on the board, check if the PWR light in the upper right corner of the board is on.

. If the boot failed, boot from an NAND and re-burn the image to the eMMC drive. (Use link:/en/BPI-R4/BananaPi_BPI-R4#_openwrt_mtk_mp4_1_wifi_sdk_wifi_driver_for_be14000_wifi_card[MP4.1] for the image file.For burning instructions, see link:/en/BPI-R4/GettingStarted_BPI-R4#_how_to_burn_image_to_onboard_EMMC[Getting Started].)

. After confirming the issue, please contact us and provide the following information:

- Describe the issue you're experiencing and how it occurred.

- Photo of the board powered on (the TTL lines and DIP switches must be clearly visible).

- Provide the serial port log file.

== Improve the performance of radio frequency under OpenWrt24.10 firmware
Use ssh to replace the old file with the new file update, or use a USB flash drive to copy and update.

NOTE: New mt7996_eeprom_233_2i5i6i.bin

Google drive: https://drive.google.com/file/d/1qneVF1a6ZGMDoLLPpQw2LPYZsRKXto1T/view?usp=sharing

Baidu cloud: https://pan.baidu.com/s/1wAzWVMooAofpQiBy7Gov_A?pwd=8888 （pincode: 8888)

=== Using ssh
Connect the computer network cable to R4 LAN port and login to ssh.
In to the corresponding path/lib/firmware/mediatek/mt7996:

image::/bpi-r4/bpi-r4-openwrt24.10-1.jpg[bpi-r4-openwrt24.10-1.jpg]

Pull the mt7996_eeprom_233_2i5i6i.bin file into this directory and replace it with a new file.

=== Use a USB disk
Copy the new file mt7996_eeprom_233_2i5i6i.bin to the U disk and use the cp command to copy to the corresponding path.

image::/bpi-r4/bpi-r4-openwrt24.10-2.jpg[bpi-r4-openwrt24.10-2.jpg]

Check the corresponding file
Just change the file weight back.

image::/bpi-r4/bpi-r4-openwrt24.10-3.jpg[bpi-r4-openwrt24.10-3.jpg]

The original file:

image::/bpi-r4/bpi-r4-openwrt24.10-4.jpg[bpi-r4-openwrt24.10-4.jpg]

Replace the new file:

image::/bpi-r4/bpi-r4-openwrt24.10-5.jpg[bpi-r4-openwrt24.10-5.jpg]